# Домашнее задание 6

Создай ветку `06-email` из ветки `master`.

Зарегистроватся на (https://sendgrid.com/)[https://sendgrid.com/] и получить API ключ. Этот ключ добавить у `.env` файл.

## Шаг 1
У функции `register` котролера `users` . Добавить функцию (возможность) создание и отпривки ОТП кода.
1. У модели юзера добавить поля `otpCode: Number`, `registered: { type: Boolean, default: false }`. 
2. Для создания ОТП кода использовать библиотеку . Ново згенерованый код добавть к обекту нового юзера.
3. После успешного создания юзера отправить на почту которую введет пользователь при создании аккаунта, лист с текстом на ваше усмотрение и сам код. Дождаться ответа от SendGrid и аш тогда отправить на клиент ответ что нужно перейти на следущую страницу ( как вариант `res.redirect('/check/opt')` - это сделает переход на нужный путь на стороне клиента (у браузере)).

## Шаг 2

Создать новый endpoint:
### @POST `/api/otp/:otpCode`
    1.1 Добавить этот ендпоинт к роутам и создать контроллер для этого.
    1.2 В контроллере должна быть проверка этого отп кода:
        1.2.1  На прием должен быть код который придет на email пользователя и его сам email.
        1.2.2  Найти соответствующий документ по этим полям.
        1.2.3  Если все успешно, обновить в этом документе поле `registered: true` и отправить на клиент результат успешности и отправить соответствующее.
        1.2.4  Если все не успешно, создать новый код записать в этот текущий документ и отправить эти новые данные на клиент.
